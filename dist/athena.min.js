!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var s={GOTO:"slide_goto",NEXT:"slide_next",PREV:"slide_prev",TRIGGER:"slide_trigger",ANIMIN:"anim_in",ANIMOUT:"anim_out",RESOLVE:"slide_resolve",DISSOLVE:"slide_dissolve"};var n={currentSlide:0,slides:[]};class r{constructor(e,t,i,s){this.bus=e,this.eventType=t,this.id=i,this.callback=s}unsubscribe(){delete this.bus.subscriptions[this.eventType][this.id],0===Object.keys(this.bus.subscriptions[this.eventType]).length&&delete this.bus.subscriptions[this.eventType]}}var l=new class{constructor(){this.subscriptions={},this.getNextUniqueId=this.getIdGenerator()}subscribe(e,t){let i=this.getNextUniqueId();this.subscriptions[e]||(this.subscriptions[e]={});let s=new r(this,e,i,t);return this.subscriptions[e][i]=s,s}unsubscribe(e,t){delete this.subscriptions[e][t],0===Object.keys(this.subscriptions[e]).length&&delete this.subscriptions[e]}dispatch(e,t=null){if(this.subscriptions[e])for(let i in this.subscriptions[e]){this.subscriptions[e][i].callback(t)}}getIdGenerator(){let e=0;return function(){return e+=1}}};class a{constructor(e,t){this.index=e,this.el=t,this.id=t.getAttribute("id")||`slide${e}`,this.url=`slide/${this.id}`,this.bus=l,t.classList.add("athena-slide")}animIn(){this.setCurrent(!0),l.dispatch(s.ANIMIN),l.dispatch(s.RESOLVE)}animOut(){return new Promise((e,t)=>{this.setCurrent(!1),l.dispatch(s.ANIMOUT),l.dispatch(s.DISSOLVE),e()})}trigger(){l.dispatch(s.NEXT)}setParent(e){this.parent=e,e.appendChild(this.el)}setCurrent(e){e?(n.currentSlide=this.index,this.el.classList.add("current")):this.el.classList.remove("current")}isCurrent(){return n.currentSlide==this.index}}var h={slideSelector:".slide",stepSelector:".step",stepListItems:!0};var d={basic:a,step:class extends a{constructor(e,t){super(e,t),this.steps=[],this.currentStep=0;let i=[].slice.call(t.querySelectorAll(h.stepSelector));if(h.stepListItems){let e=[].slice.call(t.querySelectorAll("li"));i=i.concat(e)}this.steps=i}animIn(){for(let e=0;e<this.steps.length;e++){this.steps[e].style.opacity="0"}this.currentStep=0,super.animIn()}trigger(){this.currentStep<this.steps.length?(this.steps[this.currentStep].style.opacity="1",this.currentStep++):super.trigger()}},iframe:class extends a{constructor(e,t){super(e,t),this.transition=t.dataset.transitionDuration?parseFloat(t.dataset.transitionDuration):0}animIn(){let e=1e3*this.transition;this.iframe=this.el.querySelector("iframe"),this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.classList.add("athena-iframe"),this.el.appendChild(this.iframe)),this.el.dataset.width?(this.iframe.style.width=this.el.dataset.width,this.iframe.style.height=this.el.dataset.height):this.el.dataset.interactive?(this.iframe.style.width="95vw",this.iframe.style.height="95vh"):(this.iframe.style.width="100vw",this.iframe.style.height="100vh"),this.el.dataset.width||this.el.dataset.interactive?this.addClickArea():this.iframe.style.pointerEvents="none",this.iframe.style.opacity="0",this.iframe.addEventListener("load",()=>this.loaded()),super.animIn(),setTimeout(()=>{this.iframe.setAttribute("src",this.el.dataset.src)},e)}animOut(){return this.clickArea&&this.el.removeChild(this.clickArea),this.el.removeChild(this.iframe),super.animOut()}addClickArea(){this.clickArea=document.createElement("div"),this.clickArea.classList.add("athena-iframe-clickarea"),this.clickArea.addEventListener("click",e=>this.handle_clickArea_CLICK(e)),this.el.appendChild(this.clickArea)}loaded(){this.iframe.style.opacity="1"}handle_clickArea_CLICK(e){e.stopPropagation(),this.clickArea.classList.add("focus"),this.iframe.classList.add("focus"),this.iframe.focus(),this.boundHandler=e=>this.handle_el_CLICK(e),this.el.addEventListener("click",this.boundHandler)}handle_el_CLICK(e){e.stopPropagation(),this.clickArea.classList.remove("focus"),this.iframe.classList.remove("focus"),this.el.removeEventListener("click",this.boundHandler)}}},o={KEYDOWN:"key_down",KEYUP:"key_up"};class c{constructor(e){this.list=[],this.visible=!1,this.selected=0,this.shift=!1,this.container=document.createElement("div"),this.container.className="athena-hud",e.appendChild(this.container),l.subscribe(o.KEYDOWN,e=>this.checkToggle(e))}show(){this.container.classList.add("visible"),this.registerEvents(),this.addSearchInput(),this.resetList(),this.populateList(),this.updateSelected(),this.visible=!0}hide(){this.container.classList.remove("visible"),this.container.innerHTML="",this.removeEvents(),this.visible=!1}toggle(){this.visible=!this.visible,this.visible?this.show():this.hide()}registerEvents(){this.keyDownEvent=l.subscribe(o.KEYDOWN,e=>this.keyDown(e)),this.keyUpEvent=l.subscribe(o.KEYUP,e=>this.keyUp(e))}removeEvents(){this.keyDownEvent.unsubscribe(),this.keyUpEvent.unsubscribe()}resetList(){this.list=[];for(let e=0;e<n.slides.length;e++){let t=n.slides[e];this.list.push({listIndex:e,slideId:t.id,slideEl:null,slideIndex:t.index})}}populateList(){this.listContainer&&this.listContainer.parentNode&&this.listContainer.parentNode.removeChild(this.listContainer),this.listContainer=document.createElement("div"),this.listContainer.className="athena-hud-list";for(let e=0;e<this.list.length;e++){let t=this.list[e],i=document.createElement("div");i.className="athena-hud-list-item",i.innerText=`${t.listIndex}: ${t.slideId}`,i.dataset.index=t.slideId.toString(),this.listContainer.appendChild(i),this.list[e].slideEl=i}this.container.appendChild(this.listContainer)}addSearchInput(){this.input=document.createElement("div"),this.input.className="athena-hud-input",this.input.classList.add("in"),this.container.appendChild(this.input)}typing(e){this.input.innerText=this.input.innerHTML+e,this.search(this.input.innerText)}search(e){this.list=[],this.searchList(e),this.populateList(),this.selected=0}searchList(e){let t=n.slides;for(let i=0;i<t.length;i++){let t=n.slides[i],s=t.id;isNaN(parseInt(e))||(s=t.index.toString()),0===s.search(e)&&this.list.push({listIndex:i,slideId:t.id,slideIndex:t.index,slideEl:null})}}subtractCharacter(){let e=this.input.innerText,t=e.substr(0,e.length-1);this.input.innerText=t,this.search(this.input.innerText)}updateSelected(){for(let e=0;e<this.list.length;e++)this.list[e].slideEl.classList.remove("selected");this.list[this.selected].slideEl.classList.add("selected")}checkToggle(e){switch(e.code){case"Escape":this.toggle()}}keyDown(e){switch(e.code.toLowerCase().indexOf("shift")>-1&&(this.shift=!0),e.code){case"Backspace":e.preventDefault(),this.subtractCharacter();break;case"Enter":l.dispatch(s.GOTO,this.list[this.selected].slideId),this.toggle();break;case"ArrowUp":this.selected=this.selected>0?this.selected-1:this.selected;break;case"ArrowDown":this.selected=this.selected<this.list.length-1?this.selected+1:this.selected}if(e.keyCode>47&&e.keyCode<58||e.keyCode>64&&e.keyCode<91){let t=String.fromCharCode(e.keyCode);this.shift||(t=t.toLowerCase()),this.typing(t)}this.list.length>0&&this.updateSelected()}keyUp(e){e.code.toLowerCase().indexOf("shift")>-1&&(this.shift=!1)}}var u="#athena-root{\n\tposition: relative;\n}\n\n.athena-slide{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\topacity: 0;\n\tpointer-events: none;\n}\n\n.athena-slide.current{\n\topacity: 1;\n\tpointer-events: auto;\n}\n\n.athena-iframe-clickarea{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.athena-iframe-clickarea.focus{\n\tpointer-events: none;\n\tcursor: auto;\n}\n\n.athena-iframe.focus{\n\toutline: 100px solid rgba(255, 255, 255, .75);\n}\n\n.athena-hud{\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgba(0, 0, 0, 0.5);\n\tz-index: 100;\n\tdisplay: none;\n}\n\n.athena-hud.visible{\n\tdisplay: block;\n}\n\n.athena-hud-list-item{\n\tbackground: rgba(255, 255, 255, 0.7);\n\tcolor: black;\n}\n\n.athena-hud-list-item.selected{\n\tbackground: rgba(0, 0, 0, 0.7);\n\tcolor: white;\n}\n\n.athena-hud-input{\n\tbackground: #ccc;\n\tcolor: #333;\n}\n";class p{constructor(){this.addStyles(),this.createRoot(),this.createSlides(),this.registerEvents(),this.resetAllSlides(),this.getSlideFromHash()}gotoSlideByIndex(e){let t=n.slides[e].id;this.gotoSlideById(t)}gotoSlideById(e){window.location.hash=`slide/${e}`}getSlideById(e){for(let t=0;t<n.slides.length;t++)if(n.slides[t].id==e)return n.slides[t]}next(){let e=n.currentSlide<n.slides.length-1?n.currentSlide+1:n.slides.length-1;this.gotoSlideByIndex(e)}previous(){let e=n.currentSlide>0?n.currentSlide-1:0;this.gotoSlideByIndex(e)}trigger(){n.slides[n.currentSlide].trigger()}setSlide(e){if(0==n.slides.length)return;let t;t=isNaN(e)?this.getSlideById(e):n.slides[e];let i=n.slides[n.currentSlide];i.isCurrent()?i.animOut().then(()=>t.animIn()):t.animIn()}getSlideFromHash(){if(window.location.hash){let e=window.location.hash.replace("#slide/",""),t=parseInt(e);isNaN(t)?this.setSlide(e):this.setSlide(t)}else this.setSlide(n.currentSlide)}createRoot(){this.rootElement=document.createElement("div"),this.rootElement.id="athena-root",document.body.appendChild(this.rootElement)}createSlides(){let e=[].slice.call(document.querySelectorAll(h.slideSelector));for(let t=0;t<e.length;t++){let i=e[t];i.parentNode.removeChild(i);let s=new(this.findSlideType(i))(t,i);s.setParent(this.rootElement),n.slides.push(s)}0==n.slides.length&&console.warn("no slides with selector: ",h.slideSelector)}addStyles(){let e=document.createElement("style");e.type="text/css",e.innerHTML=u,document.getElementsByTagName("head")[0].appendChild(e)}registerEvents(){l.subscribe(s.GOTO,e=>this.gotoSlideById(e)),l.subscribe(s.NEXT,()=>this.next()),l.subscribe(s.PREV,()=>this.previous()),l.subscribe(s.TRIGGER,()=>this.trigger()),window.addEventListener("hashchange",e=>this.hashChange(e)),window.addEventListener("keydown",e=>this.keyDown(e)),window.addEventListener("keyup",e=>this.keyUp(e))}hashChange(e){window.location.hash;this.getSlideFromHash()}keyDown(e){switch(e.code){case"ArrowRight":l.dispatch(s.NEXT);break;case"ArrowLeft":l.dispatch(s.PREV);break;case"Space":l.dispatch(s.TRIGGER)}}keyUp(e){}findSlideType(e){if(e.dataset.slideType){let t=e.dataset.slideType;if(d.hasOwnProperty(t))return d[t]}let t=[].slice.call(e.querySelectorAll(h.stepSelector));if(h.stepListItems){let i=[].slice.call(e.querySelectorAll("li"));t=t.concat(i)}return t.length>0?d.step:d.basic}resetAllSlides(){for(let e=0;e<n.slides.length;e++)n.slides[e].setCurrent(!1)}}i.d(t,"Athena",(function(){return m}));class m{constructor(){this.name="Athena",this.version=.1,this.slides=n,this.eventBus=l,this.slideTypes=d,this.events={UserEvent:o,SlideEvent:s},this._consoleStyle=["background: #44918F","color: white","font-weight: bold","padding: 0.2em"];let e=`%c//${this.name} v${this.version}\\\\`,t=this._consoleStyle.join("; ");console.log(e,t),window.addEventListener("keydown",e=>l.dispatch(o.KEYDOWN,e)),window.addEventListener("keyup",e=>l.dispatch(o.KEYUP,e))}generate(e){for(let t in e)h[t]=e[t];this.deck=new p,this.hud=new c(this.deck.rootElement)}}window.Athena?console.warn("Athena already defined"):window.Athena=new m}]);